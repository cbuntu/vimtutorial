# Vim高级应用

## 多文件编辑

### Vim编辑多个文件

> vim命令后加带 **文件名列表** 参数

```
**[terminal]
~$ vim 1.txt 2.txt
```

> 默认进入 1.txt，

```
**[terminal]
1 这是第1个文档
~
~
1.txt
```
> 命令模式下切换文档

命令           |说明
:-------------:|:----------------------------------------:
:n &#166; :n!  |向后切换文档，!强制切换，原文档未保存
:N &#166; :N!  |向前切换文档，!强制切换，原文档未保存

### 进入 Vim 后打开其他文件

命令           |说明
:-------------:|:----------------------------------------:
:e 3.txt       |打开 3.txt 文件
:e#            |回到前一个文件
:ls            |列出之前编辑过的文档
:b 2.txt       |直接进入 2.txt 编辑
:bd 2.txt      |可以删除以前编辑过的列表中的文件项目
:e! 4.txt      |新打开4.txt，放弃正在编辑的文件
:f             |显示正在编辑的文件名
:f 5.txt       |改变正在编辑的文件名为5.txt

### 恢复文件

> 如因断电等原因文档未保存，可采用恢复方式

```
**[terminal]
~$ vim -r 1.txt
```

## 可视模式

### 可视模式命令

> 普通模式进入可视模式

命令           |说明
:-------------:|:------------------------------------------------------------------------------------------------------:
v              |进入字符选择模式，移动光标，走过区域会被选择，再按 v 取消选择返回普通模式
shift + v      |进入行选择模式，按下V后就选取整行，上下移动光标选取更多行，再按 shift + v 取消选择返回普通模式
ctrl + v       |进入区域选择模式，可进入矩形区域选择，再按 ctrl + v 取消选择返回普通模式
可视模式下 d   |删除选择区域的内容
可视模式下 y   |复制选择区域的内容

### 可视模式技巧

* 同时编辑多行

> 1. ctrl + v 进入区域选择模式
> 2. 移动光标，选择好需操作的区域
> 3. 按 shift + i 进入插入模式
> 4. 编辑好相应内容
> 5. 按 ESC 选择区域同时变动

## 窗口操作

> Vim提供了将Vim屏幕分割(split)成小块的功能

命令                     |说明
:-----------------------:|:------------------------------------------------------:
:sp &#166; :new          |水平分割窗口，将屏幕分割成上下均匀的两个窗口
:vsp                     |垂直分割窗口，将屏幕分割成左右均匀的两个窗口
ctrl + w, w              |在各分割窗口间循环切换光标
ctrl + w,移动键          |按移动命令在分割窗口间移动光标
:sp file &#166; :vsp file|在相应分割窗口中打开指定文件
:q!                      |退出分割窗口

## 在 Vim 中读入其他文件

```
**[terminal]
~
~
:r filename
```

## 创建加密文档

> 创建加密文档，要求输入密码及确认密码，这样再次打开时要求输入密码。

```
**[terminal]
~$ vim -x filename
```

## 在Vim中执行外部命令

```
**[terminal]
~
~
:! command
```

## 帮助系统

> 打开系统帮助

```
**[terminal]
打开帮助系统
~
:help
```
> 设置帮助语言

```
**[terminal]
设置帮助文件语言
~
:set helplang=cn
```

## 功能设定

> :set nu，或在配置文件vimrc中设定，开启Vim后自动加载vimrc而生效。

### 查看当前设定

命令            |说明
:--------------:|:---------------------------:
:set &#166; :se |显示所有修改过的配置
:set all        |显示所有设定值
:set option?    |显示某设置的设定值
:set nooption   |取消当前设定值
